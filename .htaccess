Options -MultiViews
RewriteEngine On

# PWA - Configurar Content-Type para manifest.json (MUITO IMPORTANTE)
<IfModule mod_mime.c>
    AddType application/json .json
</IfModule>

# Frontend - React Router (SPA)
# Se não for um arquivo ou diretório existente, e não começar com /backend
# IMPORTANTE: manifest.json e service-worker.js devem ser excluídos do rewrite
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/backend
RewriteCond %{REQUEST_URI} !^/manifest\.json$
RewriteCond %{REQUEST_URI} !^/service-worker\.js$
RewriteCond %{REQUEST_URI} !^/service-worker-register\.js$
RewriteCond %{REQUEST_URI} !^/icons/
RewriteRule ^ index.html [QSA,L]

# Backend - Deixar passar direto para a pasta backend
RewriteCond %{REQUEST_URI} ^/backend
RewriteRule ^ - [L]


